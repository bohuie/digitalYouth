//Hide loading image and render notifications above it
$('#ajax-loading').css("visibility","hidden");
$('#ajax-loading').before("<%= j (render 'shared/notifications', :local_activities => @notifications) %>");

//Hide all the notifications added
<% first_id = 'notification-' + @notifications.first.id.to_s %>
$('#ajax-loading').before().prevUntil($('#<%=first_id%>')).hide();
$('#<%=first_id%>').hide();

//Fade in all the notifications added
$('#ajax-loading').before().prevUntil($('#<%=first_id%>')).fadeIn(500);
$('#<%=first_id%>').fadeIn(500);

//Restrict the ability to make more requests when scrolling
<% if @notifications.current_page >= @notifications.total_pages %>
	can_request = false;
	$('#notif-loading').css("display","none");
<% else %>
	can_request = true;
<% end %>