<%= render "users/shared/profile" %>

<% if current_user.has_role? :employee %>
	<%= render partial: "shared/job_seeker_tabs", locals: { active: "applications" } %>

    <div class="tab-content">
		<h4 class="job-application-content"><%= link_to raw("#{@job_posting.title} (<i>#{@job_posting.user.company_name}</i>)"), job_posting_path(@job_posting) %>
			<span class=" label label-<%=@job_posting_application.get_bootstrap_status%>"><%="#{@job_posting_application.get_status_string}"%></span>
		</h4>
		<% if @job_posting_application.status == -1 %>
			<p> Sorry, your application has been rejected by <%=@job_posting_application.company.company_name%>.</p>
		<% elsif @job_posting_application.status == 0 %>
			<p> Your application has yet to be reviewed by <%=@job_posting_application.company.company_name%>.</p>
		<% elsif @job_posting_application.status == 1 %>
			<p> Your application is being considered by <%=@job_posting_application.company.company_name%>.</p>
		<% elsif @job_posting_application.status == 2 %>
			<p> Your application has been accepted!<br>
			You will be contacted by <%=@job_posting_application.company.company_name%> soon.
			</p>
		<% end %>
		<%= render partial: "job_posting_applications/user_app_skills", locals: {applicant: @job_posting_application.applicant} %>
		<div class="row">
			<div class="col-md-4">
				<h4>Applicant Message:</h4>
				<%= @job_posting_application.message %>
			</div>
		</div>
	</div>
	<br />
<% elsif current_user.has_role? :employer %>
	<%= render partial: "shared/employer_tabs", locals: { active: "jobs" } %>
	<div class="user-information">
		<%= render partial: "job_posting_applications/user_app_skills", locals: {applicant: @job_posting_application.applicant} %>
		<h4>Applicant Message:</h4>
		<%= raw("<p>#{@job_posting_application.message}</p>") if !@job_posting_application.message.blank? %>
	</div>

	<div>		
		<h3 class="job-application-content"><span class=" label label-<%=@job_posting_application.get_bootstrap_status%>"><%="#{@job_posting_application.get_status_string}"%></span></h3>
		<%= raw("<i>You should contact this applicant and continue the hiring process.</i><br>") if @job_posting_application.status == 2%>
		<br>
		<%= link_to "View Posting", job_posting_path(@job_posting_application.job_posting), class: "btn btn-primary" %>
		<%= link_to "Reject", update_job_posting_application_path(@job_posting_application,status:"Rejected"), class: "btn btn-danger", method: "patch" %>
		<%= link_to "Consider", update_job_posting_application_path(@job_posting_application, status:"Considering"), class: "btn btn-info", method: "patch" %>
		<%= link_to "Accept", update_job_posting_application_path(@job_posting_application, status:"Accepted"), class: "btn btn-success", method: "patch" %>
	</div>
	<br />
<% end %>